function setItemType(){setTimeout(function(){$("#IsRawItem")[0].checked?$("#ItemType").val("1"):$("#IsRecipe")[0].checked?$("#ItemType").val("2"):$("#IsDeal")[0].checked?$("#ItemType").val("3"):$("#ItemType").val("0")},100)}function MainCategory_OnChange(){var n=$("#CategoryId").val();$("#SubCategoryId").find("option").remove().end().append('<option value="">Select Sub-Category<\/option>').val("");n!=""?$.ajax({url:"/SubCategory/Get/?parentCategoryId="+n,type:"GET",success:function(n){var i,t;if(n.subCategories!=null)for(i in n.subCategories)t=n.subCategories[i],$("#SubCategoryId").append('<option value="'+t.id+'">'+t.name+"<\/option>");$("#SubCategoryId").removeAttr("disabled");$("#btnAddSubCategory").removeClass("disabled");console.log("response",n)},error:function(){sweetAlert.error({text:"An error occcured while updating role."})}}):($("#SubCategoryId").attr("disabled","disabled"),$("#btnAddSubCategory").addClass("disabled"))}function CalculatePurcahseRate(){for(var t,r=$("table#subitems-table tbody tr").length,i=0,n=0;n<r;n++)t=parseFloat($(`#InvItemRecipeChild_${n}__Total`).val()),isNaN(t)||(i+=t);$("#PurchaseRate").val(i)}function NameAttribute_OnChange(){var n=$("#Name").val();$("#SizeId").val()!=""&&(n=n+"/"+$("#SizeId option:selected").html().trim());$("#ColorId").val()!=""&&(n=n+"/"+$("#ColorId option:selected").html().trim());$("#BrandId").val()!=""&&(n=n+"/"+$("#BrandId option:selected").html().trim());$("#FullName").val(n)}function DisplayOnPos_OnClick(){$("#DisplayOnPos")[0].checked}function IsRawItem_OnClick(){var n=$("#PurchaseRate").attr("readonly");typeof n!=typeof undefined&&n!==!1&&($("#PurchaseRate").removeAttr("readonly"),$("#PurchaseRate").val(""));setItemType();$("#IsRawItem")[0].checked?(IsSubItemsTableInited=!1,IsModifiersTableInited=!1,$("#DisplayOnPos")[0].checked=!1,$("#DisplayOnPos").attr("disabled","disabled"),$("#IsDeal")[0].checked=!1,$("#IsRecipe")[0].checked=!1,$("#table-label").html(""),$("#recipe-table-container").attr("hidden","hidden"),$("#subitems-table tbody").html("<tr><\/tr>"),$("#subitems-deleted-rows-table tbody").html("<tr><\/tr>"),$("#addMiodifiersSwitch")[0].checked=!1,$("#addMiodifiersSwitch").attr("disabled","disabled"),$("#modifiers-table-container").attr("hidden","hidden"),$("#modifiers-table tbody").html("<tr><\/tr>"),$("#modifiers-deleted-rows-table").html("<tr><\/tr>")):($("#addMiodifiersSwitch").removeAttr("disabled"),$("#DisplayOnPos").removeAttr("disabled"))}function IsDeal_OnClick(){setItemType();$("#IsDeal")[0].checked?($("#PurchaseRate").attr("readonly","readonly"),$("#PurchaseRate").val("0"),$("div#recipe-table-container").removeAttr("hidden"),InitSubItemsTable(),$("#addMiodifiersSwitch").removeAttr("disabled"),$("#DisplayOnPos").removeAttr("disabled"),$("#IsRawItem")[0].checked=!1,$("#IsRecipe")[0].checked=!1,$("#table-label").html("Deal Items")):($("#PurchaseRate").removeAttr("readonly"),$("#PurchaseRate").val(""),$("#IsRecipe")[0].checked||$("div#recipe-table-container").attr("hidden","hidden"),$("#IsRecipe")[0].checked||$("#IsDeal")[0].checked||(IsSubItemsTableInited=!1))}function AddRecipe_OnClick(){setItemType();$("#IsRecipe")[0].checked?($("#PurchaseRate").attr("readonly","readonly"),$("#PurchaseRate").val("0"),$("div#recipe-table-container").removeAttr("hidden"),InitSubItemsTable(),$("#addMiodifiersSwitch").removeAttr("disabled"),$("#DisplayOnPos").removeAttr("disabled"),$("#IsRawItem")[0].checked=!1,$("#IsDeal")[0].checked=!1,$("#table-label").html("Recipe Items")):($("#PurchaseRate").removeAttr("readonly"),$("#PurchaseRate").val(""),$("#IsDeal")[0].checked||$("div#recipe-table-container").attr("hidden","hidden"),$("#IsRecipe")[0].checked||$("#IsDeal")[0].checked||(IsSubItemsTableInited=!1))}function InitSubItemsTable(){var n=`<tr id="loader">
                <td colspan = "7">
                    <div class="d-flex align-items-center">
                        <strong>Loading...</strong>
                        <div class="spinner-border ml-auto" role="status" aria-hidden="true"></div>
                    </div>
                    </td>
                    </tr>`;$("#subitems-table tbody").html(n);$("table#deleted-rows-table tbody").html("<tr><\/tr>");getSubItemRow(0)}function getSubItemRow(n){$.ajax({url:"/Items/GetAddItemRecipeRow?rowNo="+n,type:"GET",success:function(n){$("#subitems-table tbody #loader").hide();$("#subitems-table tbody tr:last").after(n);$(".select").select2();$("#subitems-table tbody #loader").remove();IsSubItemsTableInited=!0},error:function(){}})}function AddSubItemsRow(){$("#btn-add-subitems-row").attr("disabled","disabled");var n=parseInt($("#subitems-table tbody tr:last")[0].getAttribute("data-row-no"))+1;$("#IsDeal")[0].checked?getSubItemRow(n):getSubItemRow(n);setTimeout(function(){$("#btn-add-subitems-row").removeAttr("disabled")},300)}function RemoveSubItemsRow(n){var i="table#subitems-table tbody tr.row-no-"+n+" ",t;$(i+" td .row-status").val(STATUSES.DELETED);t=$(i).clone();$(t).removeClass("row-no-"+n);$(t).addClass("del-row-no-"+n);$("#subitems-deleted-rows-table tbody tr:last").after(t);$(i).remove();setTimeout(function(){CalculatePurcahseRate()},100);$("table#subitems-table tbody tr").length==0&&$("#subitems-table tbody").html("<tr><\/tr>")}function CalculateSubItems_Total(n){var t=0,i=parseFloat($(`#InvItemRecipeChild_${n}__Quantity`).val()),r=parseFloat($(`#InvItemRecipeChild_${n}__SalesRate`).val());t=i*r;$(`#InvItemRecipeChild_${n}__Total`).val(t);CalculatePurcahseRate()}function ItemBarCodeSelect_OnChange(n){if(flag){var t=$("#InvItemRecipeChild_"+n+"__BarCodeId option:selected")[0].getAttribute("data-ItemId");$("#InvItemRecipeChild_"+n+"__ItemId").val(t);flag=!1;$("#InvItemRecipeChild_"+n+"__ItemId").trigger("change.select2");flag=!0}}function ItemSelect_OnChange(n){var r=$("#InvItemRecipeChild_"+n+"__ItemId option:selected")[0].getAttribute("data-purchaseRate"),u=$("#InvItemRecipeChild_"+n+"__ItemId option:selected")[0].getAttribute("data-itemMeasurement"),f=$("#InvItemRecipeChild_"+n+"__ItemId option:selected")[0].getAttribute("data-itemUnit"),t,i;$("#InvItemRecipeChild_"+n+"__Measurement").val(u+" "+f);$("#InvItemRecipeChild_"+n+"__SalesRate").val(r);CalculateSubItems_Total(n);flag&&(t=$("#InvItemRecipeChild_"+n+"__ItemId option:selected")[0].getAttribute("data-ItemBrCode"),t!=null&&(t=t.trim()),flag=!1,t!=""?(i=$("#InvItemRecipeChild_"+n+"__BarCodeId option:contains("+t+")").val(),$("#InvItemRecipeChild_"+n+"__BarCodeId").val(i),$("#InvItemRecipeChild_"+n+"__BarCodeId").trigger("change.select2")):($("#InvItemRecipeChild_"+n+"__BarCodeId").val(""),$("#InvItemRecipeChild_"+n+"__BarCodeId").trigger("change.select2")),flag=!0)}function AddModifiers_OnClick(){$("#addMiodifiersSwitch")[0].checked?($("#modifiers-table-container").removeAttr("hidden"),IsModifiersTableInited||InitModifiersTable()):$("#modifiers-table-container").attr("hidden","hidden")}function InitModifiersTable(){var n=`<tr id="loader">
                    <td colspan = "6">
                        <div class="d-flex align-items-center">
                            <strong>Loading...</strong>
                            <div class="spinner-border ml-auto" role="status" aria-hidden="true"></div>
                        </div>
                        </td>
                        </tr>`;$("#modifiers-table tbody").html(n);$("table#modifiers-deleted-rows-table tbody").html("<tr><\/tr>");getModifierRow(0)}function getModifierRow(n){$.ajax({url:"/Items/GetAddItemModifierRow?rowNo="+n,type:"GET",success:function(n){$("#modifiers-table tbody #loader").hide();$("#modifiers-table tbody tr:last").after(n);$(".select").select2();$("#modifiers-table tbody #loader").remove();IsModifiersTableInited=!0},error:function(){}})}function AddModifiersRow(){$("#btn-add-modifiers-row").attr("disabled","disabled");var n=parseInt($("#modifiers-table tbody tr:last")[0].getAttribute("data-row-no"))+1;getModifierRow(n);setTimeout(function(){$("#btn-add-modifiers-row").removeAttr("disabled")},300)}function RemoveModifiersRow(n){var i="table#modifiers-table tbody tr.row-no-"+n+" ",t;$("table#modifiers-table tbody tr").length==1&&$("#modifiers-table tbody tr:last").after("<tr><\/tr>");$(i+" td .row-status").val(STATUSES.DELETED);t=$(i).clone();$(t).removeClass("row-no-"+n);$(t).addClass("del-row-no-"+n);$("#modifiers-deleted-rows-table tbody tr:last").after(t);$(i).remove()}function ModifierSelect_OnChange(n){var t=$("#InvItemModifiers_"+n+"__ModifierId option:selected")[0].getAttribute("data-ModifierCharges");$("#InvItemModifiers_"+n+"__ModifierCharges").val(t);CalculateModifiers_Total(n)}function CalculateModifiers_Total(n){var t=0,i=parseFloat($(`#InvItemModifiers_${n}__Quantity`).val()),r=parseFloat($(`#InvItemModifiers_${n}__ModifierCharges`).val());t=i*r;$(`#InvItemModifiers_${n}__Total`).val(t)}var IsSubItemsTableInited,IsModifiersTableInited,flag;bindSubmit("edit-item-form","btn-edit-item","/Items/Edit",null,null,function(n){n.responseCode===CODES.RESPONSE_CODE_UPDATED&&$("#item-image-input").val()!==""&&$(`#item-image`).attr("src",n.model.imageUrl)});IsSubItemsTableInited=!1;IsModifiersTableInited=!1;$(document).ready(function(){var t,n,i;if($(".select").select2(),$("#IsRecipe")[0].checked||$("#IsDeal")[0].checked)for(IsSubItemsTableInited=!0,t=$("table#subitems-table tbody tr").length,n=0;n<t;n++){var r=$("#InvItemRecipeChild_"+n+"__ItemId option:selected")[0].getAttribute("data-purchaseRate"),u=$("#InvItemRecipeChild_"+n+"__ItemId option:selected")[0].getAttribute("data-itemMeasurement"),f=$("#InvItemRecipeChild_"+n+"__ItemId option:selected")[0].getAttribute("data-itemUnit");$("#InvItemRecipeChild_"+n+"__Measurement").val(u+" "+f);$("#InvItemRecipeChild_"+n+"__SalesRate").val(r);CalculateSubItems_Total(n)}if($("#addMiodifiersSwitch")[0].checked)for(IsModifiersTableInited=!0,t=$("table#modifiers-table tbody tr").length,n=0;n<t;n++)i=$("#InvItemModifiers_"+n+"__ModifierId option:selected")[0].getAttribute("data-ModifierCharges"),$("#InvItemModifiers_"+n+"__ModifierCharges").val(i),CalculateModifiers_Total(n)});flag=!0;