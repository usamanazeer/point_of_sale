function ResetForm(){$("#AddJournalEntry").trigger("reset");$("#transaction-details-table tbody").find("tr:gt(0)").remove();$(".select").trigger("change.select2");$(".form-control.dr").removeAttr("disabled");$(".form-control.cr").removeAttr("disabled");$(".total-row").removeClass("red");$(".total-row").removeClass("green");$("#dr-total").html("0");$("#cr-total").html("0")}function ApplySelect2(){$(".select").select2()}function Submit(){var n="btn-add-transaction",i="AddJournalEntry",t;const r=new FormData($(`#${i}`)[0]);t=$(`#${n}`).html();setButtonBusy(n);$.ajax({url:"/Journal/Add",type:"POST",data:r,cache:!1,contentType:!1,processData:!1,headers:{RequestVerificationToken:$(`form#${i} > input[name="__RequestVerificationToken"]`).val()},success:function(i){console.log(i);i.errorOccured?sweetAlert.error({text:i.errorMessage}):AlertManager.AlertSweetly(i);(i.responseCode===CODES.RESPONSE_CODE_OK||i.responseCode===CODES.RESPONSE_CODE_CREATED)&&(ResetForm(),window.scrollTo({top:0,left:0,behavior:"smooth"}));setButtonFree(n,t)},error:function(i){console.log(i);sweetAlert.error({text:"An Error Occured."});setButtonFree(n,t)}})}function AddRow(){const n=parseInt($("#transaction-details-table tbody tr:last")[0].getAttribute("data-row-no"))+1;$.ajax({url:`/Journal/GetJournalEntryRow?rowNo=${n}`,type:"GET",success:function(n){$("#transaction-details-table tbody tr:last").after(n);ApplySelect2()},error:function(n){console.log("error while adding row: ",n)}})}function RemoveRow(n){const t=`table#transaction-details-table tbody tr.row-no-${n} `;if($("table#transaction-details-table tbody tr").length>2){$(t+" td .row-status").val(STATUSES.DELETED);const i=$(t).clone();$(i).removeClass(`row-no-${n}`);$(i).addClass(`del-row-no-${n}`);$("#deleted-rows-table tbody tr:last").after(i);$(t).remove()}}function AccountSelect_OnChange(n){setStatement(n)}function setStatement(n){var t=$(`#AccTransactionDetail_${n}__AccountId option:selected`).text();if(t.trim()!==""){if($(`#AccTransactionDetail_${n}__Dr`).val()!=="0"){$(`#AccTransactionDetail_${n}__Statement`).val(`${t} Dr.`);return}if($(`#AccTransactionDetail_${n}__Cr`).val()!=="0"){$(`#AccTransactionDetail_${n}__Statement`).val(`${t} Cr.`);return}$(`#AccTransactionDetail_${n}__Statement`).val("")}else $(`#AccTransactionDetail_${n}__Statement`).val("")}function DrChange(n){$(`#AccTransactionDetail_${n}__Dr`).val()===""&&$(`#AccTransactionDetail_${n}__Dr`).val("0");parseFloat($(`#AccTransactionDetail_${n}__Dr`).val())!==0?$(`#AccTransactionDetail_${n}__Cr`).attr("disabled","disabled"):$(`#AccTransactionDetail_${n}__Cr`).removeAttr("disabled");TotalDrCr();setStatement(n)}function CrChange(n){$(`#AccTransactionDetail_${n}__Cr`).val()===""&&$(`#AccTransactionDetail_${n}__Cr`).val("0");parseFloat($(`#AccTransactionDetail_${n}__Cr`).val())!==0?$(`#AccTransactionDetail_${n}__Dr`).attr("disabled","disabled"):$(`#AccTransactionDetail_${n}__Dr`).removeAttr("disabled");TotalDrCr();setStatement(n)}function TotalDrCr(){var n=0,t=0;const i=$("table#transaction-details-table tbody tr");for(let r=0;r<i.length;r++){const u=i[r],f=parseFloat($(u).find("td:eq(2) input").val()),e=parseFloat($(u).find("td:eq(3) input").val());n+=f;t+=e}return $("#dr-total").html(`${n}`),$("#cr-total").html(`${t}`),n!==t?($(".total-row").removeClass("green"),$(".total-row").addClass("red"),!1):($(".total-row").removeClass("red"),$(".total-row").addClass("green"),!0)}var FormIsValid=!0;$(document).ready(function(){ApplySelect2();$("#AddJournalEntry").submit(function(n){n.preventDefault();FormIsValid=!0;var t=0,i=0;const r=$("table#transaction-details-table tbody tr");for(let n=0;n<r.length;n++){const u=r[n],o=$(u).find("td:eq(0) select").val(),f=parseFloat($(u).find("td:eq(2) input").val()),e=parseFloat($(u).find("td:eq(3) input").val());t+=f;i+=e;o!==""?$(u).find("td:eq(0) .invalid-span").css("display","none"):(FormIsValid=!1,$(u).find("td:eq(0) .invalid-span").css("display","block"));f===0&&e===0?(FormIsValid=!1,$(u).find("td:eq(2) .invalid-span").css("display","block"),$(u).find("td:eq(3) .invalid-span").css("display","block")):($(u).find("td:eq(2) .invalid-span").css("display","none"),$(u).find("td:eq(3) .invalid-span").css("display","none"))}t!==i&&sweetAlert.error({title:"Required!",text:"Debit (Dr.) Amount Must be equals to  Credit (Cr.) Amount."});FormIsValid&&t===i&&Submit()})});